### 四元式指令设计

#### 指令种类

##### 基本运算指令

```shell
# 二元表达式
add, sub, mult, div, land, lor
# e.g.
add <val1>, <val2>, <val3>	# 结果存到val3

# 一元表达式
neg, pos, lnot
# e.g.
neg <varl>, <val3>			# 结果存到val3
```

##### 内存指令

​	对于局部变量，不翻译存取操作。

```shell
# 为局部变量分配空间
alloca
# e.g.
alloca <>, t1

# 存取地址
load, store
load <val>, <base> + <offset>
```

##### 比较指令

```shell
eq, ne
ge, gt
le, lt
```

##### 分支指令

```shell
jump <label>		# 一个参数
br	<val>, <label1>, <label2>
```

##### 函数调用返回指令

```
call <func_name>[para1, para2, ...]
ret <val>
```

#### 统一命名

```shell
label_<cnt>	# 跳转标签
f_<f_name>	# 函数标签
t_<cnt>		# 临时变量名
g_<ident>	# 全局变量标签
str_<cnt>	# 字符串常量名
```

#### 内存分配

* 全局变量，正向增长。返回原先的内存大小`originBias`。
* 局部变量，栈，反向增长。返回加之后的地址值，即先增加`size`，再返回`stackSize`。

